@using HOA.Model
@using System.Linq

@*
    For more information on enabling MVC for empty projects, visit http://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
    ViewBag.Title = "Status";
}

<div class="panel panel-info">
    <div class="panel-heading">

<h3 class="panel-title">
@if(Model.Status == Status.Submitted)
{
    @:Submitted to the Community manager
}

@if (Model.Status == Status.ARBIncoming ||
    Model.Status == Status.UnderReview ||
    Model.Status == Status.ARBFinal)
{
    @:Under review by the ARB
}


@if (Model.Status == Status.ReviewComplete)
{
    @: Under review by the HOA liaison
}

@if (Model.Status == Status.Approved)
{
    @: Approved
}
@if (Model.Status == Status.ConditionallyApproved)
{
    @: Conditionally Approved
}
@if (Model.Status == Status.Rejected)
{
    @: Rejected
}
@if (Model.Status == Status.MissingInformation)
{
    @: Missing Information
}

@if (Model.Status == Status.PrepApproval || Model.Status == Status.PrepConditionalApproval)
{
    @: Preparing final response
}


</h3>

    </div>
    <div class="panel-body">
        @if (@Model.Audits != null && @Model.Audits.Count > 0)
        {
            <p>
            Last update: @Model.Audits[@Model.Audits.Count - 1].DateTime.ToString("MM/dd/yyyy hh:mm tt")
            </p>
        }



        @if (Model.Responses != null && Model.Responses.Count > 0)
        {
            <br />
            <h4>Feedback</h4>
            @foreach (var response in Model.Responses)
            {
                @response.Created.ToString("MM/dd/yyyy") <br />
                @response.Comments<br />
                <br />
            }

            <br />
        }




        @if (Model.Status == Status.MissingInformation || Model.Status == Status.Rejected)
        {
            <a class="btn btn-primary" href="/Submission/Resubmit/@Model.Id" role="button">Resubmit &raquo;</a>
        }
    </div>
</div>